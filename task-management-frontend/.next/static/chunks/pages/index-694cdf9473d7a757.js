(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8295)}])},9323:function(e,t,n){"use strict";n.d(t,{S:function(){return a},X:function(){return i}});var r=n(2729),s=n(8806);function _templateObject(){let e=(0,r._)(["\n  query GetTasks($status: String) {\n    tasks(status: $status) {\n      id\n      title\n      description\n      status\n      dueDate\n      createdAt\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,r._)(["\n  query GetTask($id: ID!) {\n    task(id: $id) {\n      id\n      title\n      description\n      status\n      dueDate\n      createdAt\n    }\n  }\n"]);return _templateObject1=function(){return e},e}let a=(0,s.Ps)(_templateObject()),i=(0,s.Ps)(_templateObject1())},8295:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return TaskListPage}});var r=n(5893),s=n(7294),a=n(6812),i=n(7582),o=n(3914),u=n(4012),l=n(20),d=n(4692),c=n(990),p=n(6252),v=n(320).Nq?o.useLayoutEffect:o.useEffect;function useMutation(e,t){var n=(0,p.x)(null==t?void 0:t.client);(0,d.Vp)(e,d.n_.Mutation);var r=o.useState({called:!1,loading:!1,client:n}),s=r[0],a=r[1],m=o.useRef({result:s,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});v(function(){Object.assign(m.current,{client:n,options:t,mutation:e})});var x=o.useCallback(function(e){void 0===e&&(e={});var t=m.current,n=t.options,r=t.mutation,s=(0,i.pi)((0,i.pi)({},n),{mutation:r}),o=e.client||m.current.client;m.current.result.loading||s.ignoreResults||!m.current.isMounted||a(m.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:o});var d=++m.current.mutationId,p=(0,u.J)(s,e);return o.mutate(p).then(function(t){var n,r,s=t.data,i=t.errors,u=i&&i.length>0?new c.cA({graphQLErrors:i}):void 0,v=e.onError||(null===(n=m.current.options)||void 0===n?void 0:n.onError);if(u&&v&&v(u,p),d===m.current.mutationId&&!p.ignoreResults){var x={called:!0,loading:!1,data:s,error:u,client:o};m.current.isMounted&&!(0,l.D)(m.current.result,x)&&a(m.current.result=x)}var h=e.onCompleted||(null===(r=m.current.options)||void 0===r?void 0:r.onCompleted);return u||null==h||h(t.data,p),t},function(t){if(d===m.current.mutationId&&m.current.isMounted){var n,r={loading:!1,error:t,data:void 0,called:!0,client:o};(0,l.D)(m.current.result,r)||a(m.current.result=r)}var s=e.onError||(null===(n=m.current.options)||void 0===n?void 0:n.onError);if(s)return s(t,p),{data:void 0,errors:t};throw t})},[]),h=o.useCallback(function(){if(m.current.isMounted){var e={called:!1,loading:!1,client:m.current.client};Object.assign(m.current,{mutationId:0,result:e}),a(e)}},[]);return o.useEffect(function(){var e=m.current;return e.isMounted=!0,function(){e.isMounted=!1}},[]),[x,(0,i.pi)({reset:h},s)]}var m=n(9323),x=n(2729),h=n(8806);function _templateObject(){let e=(0,x._)(["\n  mutation AddTask($input: TaskInput!) {\n    addTask(input: $input) {\n      id\n      title\n      description\n      status\n      dueDate\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,x._)(["\n  mutation UpdateTaskStatus($id: ID!, $status: String!) {\n    updateTaskStatus(id: $id, status: $status) {\n      id\n      title\n      status\n    }\n  }\n"]);return _templateObject1=function(){return e},e}let f=(0,h.Ps)(_templateObject()),j=(0,h.Ps)(_templateObject1());var g=n(1514),b=n.n(g);function TaskForm(e){let{onSubmit:t}=e,[n,a]=(0,s.useState)({title:"",description:"",status:"Todo",dueDate:""});return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let r=n.dueDate?new Date("".concat(n.dueDate,"T00:00:00Z")).toISOString():null,s={...n,dueDate:r};t&&t(s)},className:b().taskForm,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Title"}),(0,r.jsx)("input",{type:"text",value:n.title,onChange:e=>a({...n,title:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Description"}),(0,r.jsx)("textarea",{value:n.description,onChange:e=>a({...n,description:e.target.value}),rows:"3"})]}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Status"}),(0,r.jsxs)("select",{value:n.status,onChange:e=>a({...n,status:e.target.value}),children:[(0,r.jsx)("option",{value:"Todo",children:"Todo"}),(0,r.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,r.jsx)("option",{value:"Done",children:"Done"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Due Date"}),(0,r.jsx)("input",{type:"date",value:n.dueDate,onChange:e=>a({...n,dueDate:e.target.value})})]})]}),(0,r.jsx)("button",{type:"submit",children:"Save Task"})]})}function TaskListPage(){var e;let[t,n]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),{loading:u,error:l,data:d,refetch:c}=(0,a.aM)(m.S,{variables:{status:t}}),[p]=useMutation(j,{onCompleted:()=>c()}),[v]=useMutation(f,{onCompleted:()=>{o(!1),c()}}),isValidDate=e=>{let t=new Date(e);return t instanceof Date&&!isNaN(t)};return u?(0,r.jsx)("div",{className:"flex justify-center p-8",children:"Loading..."}):l?(0,r.jsxs)("div",{className:"text-red-500 p-8",children:["Error: ",l.message]}):(0,r.jsxs)("div",{className:"container mx-auto p-4 max-w-4xl",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Task Manager"}),(0,r.jsxs)("div",{className:"flex justify-between mb-6",children:[(0,r.jsx)("button",{onClick:()=>o(!i),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:i?"Cancel":"Add Task"}),(0,r.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"border rounded px-3 py-1",children:[(0,r.jsx)("option",{value:"",children:"All Tasks"}),(0,r.jsx)("option",{value:"Todo",children:"Todo"}),(0,r.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,r.jsx)("option",{value:"Done",children:"Done"})]})]}),i&&(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,r.jsx)(TaskForm,{onSubmit:e=>{v({variables:{input:e}})}})}),(0,r.jsx)("div",{className:"space-y-4",children:null==d?void 0:null===(e=d.tasks)||void 0===e?void 0:e.map(e=>(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-lg",children:e.title}),(0,r.jsxs)("p",{className:"text-gray-500 text-sm",children:["Status: ",e.status," | Due:"," ",isValidDate(e.dueDate)?new Date(e.dueDate).toLocaleDateString():"Invalid or missing date"]})]}),(0,r.jsxs)("select",{value:e.status,onChange:t=>p({variables:{id:e.id,status:t.target.value}}),className:"px-2 py-1 rounded text-sm ".concat("Todo"===e.status?"bg-red-100 text-red-800":"In Progress"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[(0,r.jsx)("option",{value:"Todo",children:"Todo"}),(0,r.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,r.jsx)("option",{value:"Done",children:"Done"})]})]})},e.id))})]})}},1514:function(e){e.exports={"task-form":"TaskForm_task-form__93_8s","form-row":"TaskForm_form-row__exKFr"}}},function(e){e.O(0,[530,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);